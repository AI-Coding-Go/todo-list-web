# 编辑任务

## 接口信息

- **URL**: `/api/tasks/{id}`
- **方法**: `PUT`
- **描述**: 更新任务信息（标题、描述、截止时间、优先级）

## 请求参数

### Path参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 任务ID |

### Headers

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| Content-Type | String | 是 | application/json |

### Body参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| title | String | 是 | 任务标题，限50字符 | "更新后的任务标题" |
| description | String | 否 | 任务描述，限500字符 | "更新后的任务描述" |
| dueTime | String | 否 | 截止时间，ISO 8601格式 | "2024-12-31T23:59:00" |
| priority | Integer | 否 | 优先级：1-高，2-中，3-低 | 2 |

## 请求示例

```bash
curl -X PUT http://localhost:8080/api/tasks/1 \
  -H "Content-Type: application/json" \
  -d '{
    "title": "更新后的任务标题",
    "description": "更新后的任务描述",
    "priority": 2,
    "dueTime": "2024-12-25T12:00:00"
  }'
```

```javascript
fetch('http://localhost:8080/api/tasks/1', {
  method: 'PUT',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    title: '更新后的任务标题',
    description: '更新后的任务描述',
    priority: 2,
    dueTime: '2024-12-25T12:00:00'
  })
})
.then(response => response.json())
.then(data => console.log(data));
```

## 响应示例

### 成功响应

```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "id": 1,
    "title": "更新后的任务标题",
    "description": "更新后的任务描述",
    "status": 0,
    "statusDesc": "未完成",
    "priority": 2,
    "priorityDesc": "中",
    "dueTime": "2024-12-25T12:00:00",
    "overdue": false,
    "createTime": "2025-11-14T12:45:38",
    "updateTime": "2025-11-14T12:45:50",
    "finishTime": null
  }
}
```

### 失败响应

```json
{
  "code": 400,
  "message": "任务标题不能为空"
}
```

```json
{
  "code": 500,
  "message": "任务不存在"
}
```

## 响应字段说明

| 字段 | 类型 | 说明 |
|------|------|------|
| id | Long | 任务ID |
| title | String | 更新后的任务标题 |
| description | String | 更新后的任务描述 |
| status | Integer | 任务状态（编辑不改变状态） |
| statusDesc | String | 状态描述 |
| priority | Integer | 更新后的优先级 |
| priorityDesc | String | 优先级描述 |
| dueTime | String | 更新后的截止时间 |
| overdue | Boolean | 是否逾期（根据更新后的截止时间重新计算） |
| createTime | String | 创建时间（不变） |
| updateTime | String | 更新时间（自动更新为当前时间） |
| finishTime | String | 完成时间（不变） |

## 业务规则

1. 任务ID必须存在，否则返回错误
2. 任务标题为必填项，不能为空
3. 任务标题最长50个字符
4. 任务描述最长500个字符
5. 编辑后，updateTime自动更新为当前时间
6. 编辑不改变任务状态和完成时间
7. 编辑后任务在列表中的位置不变（仅更新内容）

## 注意事项

1. 可以只更新部分字段，但title必须提供
2. 如果不想更新某个字段，可以传null（对于可选字段）或不传该字段
3. 截止时间格式必须为ISO 8601格式：`YYYY-MM-DDTHH:mm:ss`
4. 如果设置dueTime为null，表示移除截止时间
5. 编辑后overdue字段会根据新的截止时间重新计算

