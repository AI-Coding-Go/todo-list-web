# 移动端 H5 待办清单需求分析

## 1. 任务列表页

### 1.1 页面布局

- 顶部标题栏：显示"待办清单"
- 任务过滤区域：包含全部/未完成/已完成三个 Tab 切换
- 任务排序区域：点击排序按钮弹出排序选项
- 任务列表区域：滚动显示所有任务
- 底部导航栏：待办、统计、设置等核心功能入口
- 右下角悬浮"+"按钮：用于新增任务

### 1.2 功能需求

- **任务展示**：

  - 按"新增时间倒序"排列（默认）
  - 每行显示：复选框、任务标题（含优先级颜色标签）、截止时间
  - 任务标题限 50 字，超出截断显示
  - 截止时间格式："MM-DD HH:MM"，逾期未完成显示红色并标"逾期"
  - 已完成任务标题显示删除线，文字颜色变浅

- **任务操作**：

  - 点击复选框：标记任务完成/未完成
  - 操作任务项：显示编辑、删除按钮
  - 点击任务项（非复选框区域）：进入任务详情页
  - 点击删除按钮：弹出二次确认框

- **筛选功能**：

  - 全部：显示所有任务
  - 未完成：仅显示未完成任务（含逾期未完成）
  - 已完成：仅显示已完成任务

- **排序功能**：
  - 最新添加：按新增时间倒序
  - 即将截止：按截止时间正序（无截止时间排在最后）
  - 优先级：高 → 中 → 低（同优先级按新增时间倒序）

### 1.3 交互细节

- 列表为空时显示引导文案

## 2. 任务新增/编辑页

### 2.1 页面布局

- 顶部导航栏：显示"新增任务"/"编辑任务"，左侧返回按钮
- 表单区域：包含标题、描述、截止时间、优先级选择
- 底部操作栏：包含"取消"和"保存"按钮

### 2.2 功能需求

- **表单字段**：

  - 任务标题：必填，限 50 字，单行输入框
  - 任务描述：可选，限 500 字，多行文本框（支持换行）
  - 截止时间：可选，日期时间选择器
  - 优先级：高/中/低三级选择器（默认"中"）

- **交互逻辑**：
  - 新增时表单为空
  - 编辑时表单预填当前任务信息
  - 标题为空时点击保存，提示"请输入任务标题"
  - 点击保存：提交数据，成功后返回列表页
  - 点击取消：放弃修改，返回列表页
  - 编辑页有未保存更改时，返回需二次确认

### 2.3 移动端适配

- 日期时间选择器使用原生组件或适配移动端的组件

## 3. 任务详情页

### 3.1 页面布局

- 顶部导航栏：左侧返回按钮，标题"任务详情"
- 内容展示区：显示任务所有信息
- 操作按钮区：编辑、删除、标记完成/未完成按钮

### 3.2 功能需求

- **信息展示**：

  - 任务标题：大号字体，左侧带优先级颜色标签
  - 任务状态：未完成/已完成，已完成显示完成时间
  - 截止时间：格式"截止时间：YYYY-MM-DD HH:MM"，逾期标红
  - 任务描述：完整显示（支持换行）
  - 创建时间：显示任务创建时间

- **操作按钮**：
  - 编辑：跳转至编辑页
  - 删除：点击后弹出确认框
  - 标记完成/未完成：根据当前状态显示对应按钮

### 3.3 交互细节

- 删除操作二次确认："确定删除该任务？删除后不可恢复"
- 标记状态切换有视觉反馈

## 4. 数据统计页

### 4.1 页面布局

- 顶部导航栏：返回按钮，标题"数据统计"
- 图表切换 Tab：完成率、趋势图、状态分布
- 图表展示区域：根据选择的 Tab 显示对应图表
- 统计数据简要展示

### 4.2 功能需求

- **完成率统计**：

  - 近 7 天总体任务完成率
  - 按优先级统计完成率（高/中/低）

- **任务数量趋势**：

  - 近 7 天每日新增任务数（折线图）
  - 近 7 天每日完成任务数（折线图，同图对比）

- **状态分布**：
  - 当前所有任务中未完成/已完成的数量占比（饼图）

### 4.3 交互细节

- 图表支持切换类型
- 无数据时显示提示信息："暂无统计数据，添加任务后即可查看"
- 图表响应式适配不同屏幕尺寸

## 5. 提醒功能

### 5.1 页面布局

- 在设置页面中增加提醒开关
- 页面顶部可显示悬浮提醒条

### 5.2 功能需求

- **提醒触发**：

  - 仅对"设置了截止时间且未完成"的任务触发
  - 提醒时间点：截止前 30 分钟、截止时间、逾期后每 24 小时（最多 3 次）

- **提醒方式**：

  - 页面顶部悬浮提醒条：显示任务标题和截止时间
  - 悬浮条包含"查看任务"和"稍后提醒"按钮
  - 支持浏览器桌面通知（需用户授权）

- **提醒设置**：
  - 全局开关："允许任务提醒"（默认开启）

### 5.3 技术实现

- 采用长轮询方式：前端定时请求接口查询提醒事件
- 提醒状态管理：避免重复提醒

## 6. 整体 H5 页面布局设计

### 6.1 导航结构

- **底部导航栏**（固定定位）：
  - 待办列表
  - 数据统计
  - 设置

### 6.2 通用组件

- **顶部标题栏**（固定定位）：

  - 左侧返回按钮（非首页）
  - 中间标题
  - 右侧操作按钮（可选）

- **新增按钮**：
  - 右下角悬浮"+"按钮（在列表页显示）

### 6.3 移动端适配原则

- 使用 Flexbox/Grid 布局系统
- 避免横向滚动
- 优化加载性能，减少白屏时间


## 7. 技术实现要点

### 7.1 前端技术栈

- 使用 Angular 框架，使用最新稳定版 Angular 和 TypeScript 创建项目
- 样式使用 scss 和 tailwindcss v3
- 图表库：Chart.js（需适配移动端）

### 7.1 代码规范

- 在关键逻辑、复杂算法或其他重要部分添加简明注释
- 注释应解释代码的作用和意图
- 变量、函数等名称必须具有自解释性
- 类型定义（接口）名称统一以大写字母 "I" 开头（例如 `IUserData`）
- 遵循函数式编程范式
- 优先使用纯函数和不可变数据结构
- 页面组件和 UI 组件保持单一职责
- 使用组件组合而非继承
- 逻辑与 UI 分离
- 每个文件顶部必须包含文件说明注释
- 单个代码文件不应超过 300 行，超出应进行拆分
- 不需要写兼容性强的代码，除非特别要求
