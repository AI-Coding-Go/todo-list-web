# 产品开发指南

本文档为其他团队提供完整的产品开发指南，帮助快速开发当前产品。

## 📋 开发前准备

### 1. 环境要求

- **JDK**: 17+
- **Maven**: 3.6+
- **MySQL**: 8.0+
- **Redis**: 6.0+
- **IDE**: IntelliJ IDEA 或 Eclipse（推荐）

### 2. 文档阅读顺序

1. **需求文档.md** - 了解产品功能需求
2. **后端开发方案-完整版.md** - 了解技术架构和实现方案
3. **API接口文档** (`../api/`) - 了解接口设计

## 🚀 开发步骤

### 第一步：获取项目代码

```bash
# 克隆或复制项目代码
git clone <项目地址>
# 或直接复制项目文件夹
```

### 第二步：环境配置

#### 2.1 配置数据库

```bash
# 执行数据库初始化脚本（使用docs/project/中的脚本）
mysql -u root -p < docs/project/schema.sql

# 或者使用源代码中的脚本
mysql -u root -p < src/main/resources/db/schema.sql
```

**注意**: 脚本会清空并重建数据库，请确保在开发/测试环境执行。

#### 2.2 配置应用

编辑 `src/main/resources/application.yml`:

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/todo_db?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root  # 修改为你的MySQL用户名
    password:       # 修改为你的MySQL密码
  data:
    redis:
      host: localhost
      port: 6379
      password:     # 如有密码，请填写
```

### 第三步：启动服务

#### 方式一：使用IDE

1. 使用IntelliJ IDEA或Eclipse打开项目
2. 等待Maven依赖自动下载
3. 找到 `src/main/java/com/todo/TodoApplication.java`
4. 右键 -> Run 'TodoApplication'

#### 方式二：使用Maven命令

```bash
# 确保使用Java 17
export JAVA_HOME=$(/usr/libexec/java_home -v 17)
export PATH=$JAVA_HOME/bin:$PATH

# 编译项目
mvn clean compile

# 启动服务
mvn spring-boot:run
```

### 第四步：验证服务

1. **检查服务状态**
   ```bash
   curl http://localhost:8080/api-docs
   ```

2. **访问Swagger文档**
   - 打开浏览器访问: http://localhost:8080/swagger-ui.html

3. **测试API接口**
   ```bash
   # 创建测试任务
   curl -X POST http://localhost:8080/api/tasks \
     -H "Content-Type: application/json" \
     -d '{"title":"测试任务","description":"这是一个测试","priority":2}'
   
   # 查询任务列表
   curl http://localhost:8080/api/tasks
   ```

## 📚 核心文档参考

### 需求文档
- **文件**: `需求文档.md`
- **内容**: 产品功能需求、业务规则、交互规则

### 开发方案
- **文件**: `后端开发方案-完整版.md`
- **内容**: 
  - 技术架构设计
  - 数据模型设计
  - API接口设计
  - 核心功能实现
  - 开发环境配置

### API接口文档
- **位置**: `../api/` 目录
- **内容**: 所有API接口的详细说明

## 🏗️ 项目结构说明

```
项目根目录/
├── src/main/java/com/todo/     # 源代码
│   ├── controller/              # API控制器
│   ├── service/                 # 业务逻辑层
│   ├── repository/              # 数据访问层
│   ├── entity/                  # 实体类
│   ├── vo/                      # 视图对象
│   └── config/                  # 配置类
├── src/main/resources/          # 资源文件
│   ├── application.yml          # 应用配置
│   └── db/schema.sql            # 数据库脚本
├── docs/                        # 文档目录
│   ├── project/                 # 需求和方案文档（本目录）
│   └── api/                     # API接口文档
└── pom.xml                      # Maven配置
```

## 🔧 关键技术点

### 1. 数据模型
- 单表设计：`todo_task` 表
- 支持任务状态、优先级、截止时间
- 使用索引优化查询性能

### 2. API设计
- RESTful风格
- 统一JSON响应格式
- 支持分页、筛选、排序

### 3. 提醒机制
- 长轮询方式
- Redis锁机制防止重复提醒
- 定时任务每分钟扫描

### 4. 数据统计
- 完成率统计
- 任务数量趋势
- 状态分布统计

## 📝 开发注意事项

1. **单用户设计**: 本项目为单用户个人版，无需用户体系
2. **物理删除**: 任务删除为物理删除，不可恢复
3. **数据验证**: 使用Jakarta Validation进行参数验证
4. **异常处理**: 全局异常处理器统一处理异常
5. **代码规范**: 遵循分层架构，单文件不超过200行

## 🧪 测试

### 单元测试
```bash
mvn test
```

### 功能测试
参考项目根目录下的 `测试结果总结.md`

## 🔍 常见问题

### 1. 数据库连接失败
- 检查MySQL服务是否启动
- 检查用户名密码是否正确
- 检查数据库是否已创建

### 2. Redis连接失败
- 检查Redis服务是否启动
- 检查端口是否正确（默认6379）

### 3. 编译失败
- 确保使用Java 17
- 检查Maven依赖是否下载完整

### 4. 端口被占用
- 修改 `application.yml` 中的 `server.port`

## 📞 技术支持

如有问题，请参考：
- **Swagger文档**: http://localhost:8080/swagger-ui.html
- **项目代码**: 查看源代码和注释
- **API文档**: `../api/` 目录

## ✅ 开发检查清单

- [ ] 环境配置完成（JDK、Maven、MySQL、Redis）
- [ ] 数据库初始化成功
- [ ] 应用配置正确
- [ ] 服务启动成功
- [ ] API接口测试通过
- [ ] 阅读并理解需求文档
- [ ] 阅读并理解开发方案
- [ ] 查看API接口文档

---

**提示**: 建议按照本指南的顺序逐步进行，确保每一步都验证通过后再进行下一步。

